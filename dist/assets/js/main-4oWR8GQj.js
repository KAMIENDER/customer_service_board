import{C as t,r as e,l as n,i as a,g as o,s}from"./api-fqDCxL2z.js";t.register(...e);let c={interval:7};const r=n();async function i(){await d(c)}async function d(t=c){["stat-ai-reception","stat-no-response","stat-handover","stat-handover-rate","stat-no-answer-handover","stat-no-answer-rate","stat-inquiry-count","stat-payment-count","stat-conversion"].forEach(t=>{const e=document.getElementById(t);e&&(e.innerHTML='<span class="loading-spinner"></span>',e.classList.add("loading"))});try{const e=await o(t);if(e&&0===e.code&&e.data){const t=e.data;if(void 0!==t.all_num&&(document.getElementById("stat-ai-reception").textContent=t.all_num.toLocaleString()),void 0!==t["3_question_num"]&&(document.getElementById("stat-no-response").textContent=t["3_question_num"].toLocaleString()),void 0!==t.transfer_num&&(document.getElementById("stat-handover").textContent=t.transfer_num.toLocaleString()),void 0!==t.transfer_num&&t.all_num){const e=(t.transfer_num/t.all_num*100).toFixed(2);document.getElementById("stat-handover-rate").textContent=e}if(void 0!==t.can_not_answer_and_transfer_num&&(document.getElementById("stat-no-answer-handover").textContent=t.can_not_answer_and_transfer_num.toLocaleString()),void 0!==t.can_not_answer_and_transfer_num&&t.all_num){const e=(t.can_not_answer_and_transfer_num/t.all_num*100).toFixed(2);document.getElementById("stat-no-answer-rate").textContent=e}if(function(t){void 0!==t.no_trade_num&&(document.getElementById("stat-inquiry-count").textContent=t.no_trade_num.toLocaleString());void 0!==t.no_trade_and_success&&(document.getElementById("stat-payment-count").textContent=t.no_trade_and_success.toLocaleString());if(void 0!==t.no_trade_and_success&&t.no_trade_num){const e=(t.no_trade_and_success/t.no_trade_num*100).toFixed(2);document.getElementById("stat-conversion").textContent=e}}(t),void 0!==t.all_num){!function(t){const e=document.getElementById("human-saved-count");if(!e)return;e.textContent=t}(Math.ceil(t.all_num/200/1.2))}!function(t){const e=void 0!==t.all_question_num?t.all_question_num:t.question_num;void 0!==e&&(document.getElementById("stat-all-questions").textContent=e.toLocaleString());const n=t.answer_question_num;void 0!==n&&(document.getElementById("stat-answered-questions").textContent=n.toLocaleString());if(e&&void 0!==n){const t=(n/e*100).toFixed(2);document.getElementById("stat-question-coverage").textContent=t}}(t)}else u("数据格式错误")}catch(e){u()}["stat-ai-reception","stat-no-response","stat-handover","stat-handover-rate","stat-no-answer-handover","stat-no-answer-rate","stat-inquiry-count","stat-payment-count","stat-conversion"].forEach(t=>{const e=document.getElementById(t);e&&e.classList.remove("loading")})}function u(t){["stat-ai-reception","stat-no-response","stat-handover","stat-handover-rate","stat-no-answer-handover","stat-no-answer-rate","stat-inquiry-count","stat-payment-count","stat-conversion"].forEach(t=>{const e=document.getElementById(t);e&&(e.textContent="--")})}function l(t){return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`}function m(t){const e=new Date(t);return`${e.getMonth()+1}/${e.getDate()}`}r&&(c=r),document.addEventListener("DOMContentLoaded",function(){a(),d(),function(){const t=document.querySelectorAll(".date-btn:not(.date-custom-btn)"),e=document.querySelector(".date-custom-btn"),n=document.getElementById("date-picker-dropdown"),a=document.getElementById("date-picker-cancel"),o=document.getElementById("date-picker-confirm"),r=document.getElementById("date-start"),d=document.getElementById("date-end"),u=new Date,_=new Date(u);_.setDate(u.getDate()-7),d&&(d.value=l(u));r&&(r.value=l(_));t.forEach(t=>{t.addEventListener("click",async function(){document.querySelectorAll(".date-btn").forEach(t=>t.classList.remove("active")),this.classList.add("active"),n&&n.classList.remove("show"),e&&(e.textContent="自定义",e.classList.remove("has-range"));const t=this.dataset.range;if("yesterday"===t){const t=new Date,e=new Date(t);e.setDate(t.getDate()-1);const n=l(e);c={start_time:`${n} 00:00:00`,end_time:`${n} 23:59:59`}}else if(t.endsWith("days")){const e=parseInt(t);c={interval:e}}else c={interval:t};s(c),await i()})}),e&&e.addEventListener("click",function(t){t.stopPropagation(),n&&n.classList.toggle("show")});a&&a.addEventListener("click",function(){n&&n.classList.remove("show")});o&&o.addEventListener("click",async function(){const t=null==r?void 0:r.value,a=null==d?void 0:d.value;t&&a&&(document.querySelectorAll(".date-btn").forEach(t=>t.classList.remove("active")),e&&(e.classList.add("active","has-range"),e.textContent=`${m(t)} - ${m(a)}`),c={start_time:`${t} 00:00:00`,end_time:`${a} 23:59:59`},s(c),await i()),n&&n.classList.remove("show")});document.addEventListener("click",function(t){!n||n.contains(t.target)||(null==e?void 0:e.contains(t.target))||n.classList.remove("show")})}(),function(){const t=document.querySelectorAll(".filter-tab");t.forEach(e=>{e.addEventListener("click",function(){t.forEach(t=>t.classList.remove("active")),this.classList.add("active")})})}()});
